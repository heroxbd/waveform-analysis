\section{Introduction}
\label{sec:introduction}

Waveform analysis of photomultiplier tubes~(PMT) is ubiquitous in fluid-based neutrino and dark matter experiments. Accurate hit time and number of photoelectrons~(PE) provide detailed measurement of a detector's optical response. It enhances event reconstruction, particle identification, definition of fiducial volume, and consequently promotes the physics prospect.

In Super-Kamiokande~\cite{noauthor_super-kamiokande_2003} and SNO~\cite{dunger_event_2019}, the time/charge to digital converters~(TDC/QDC) recorded the threshold crossing times and integrated charges of PMT waveforms.  Experimentalists deployed fast analog-to-digital converters to record full PMT waveforms in KamLAND~\cite{the_kamland_collaboration_production_2010}, Borexino~\cite{alimonti_borexino_2009}, Daya Bay~\cite{huang_flash_2018}, XMASS~\cite{abe_xmass_2013}, XENON1T~\cite{aprile_xenon1t_2019}.  This technology advancement opened the flexibility of offline waveform analysis after data acquisition.  Nevertheless, limited by data volume and computational efficiency, early adopters emulated TDC/QDC in software with thresholding and integration algorithms.  Only recently people explored methods to extract charge and hit time of each PE~\cite{zhang_comparison_2019}.

This work focuses on precise time and charge resolution. In section~\ref{sec:toyMC}, we discuss the principles of PE measurement in PMT-based detectors to justify the toy MC setup.  In section~\ref{sec:algorithm}, we introduce waveform analysis algorithms and characterize their time performance.  Finally, in section~\ref{sec:discussion}, we discuss the impact on event reconstruction by comparising the time and charge resolutions.
